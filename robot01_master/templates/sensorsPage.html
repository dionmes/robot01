<!DOCTYPE html>
<html lang="en">
<head>
	<title>robot01 sensors</title>
</head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/pico.indigo.min.css">
<script src="js/jquery-3.7.1.min.js"></script>

<script>

function update_VL53L1X() {
	$.ajax({
		url: "http://{{context.robot01_ip}}/VL53L1X_Info",
		type: 'GET',
    	dataType: 'json',
    	async: true
    })
    .done(function (result) {
		$( "#ph_distance" ).html( "Distance : " + result.range_mm + " mm.");
		$( "#ph_ambient" ).html( "Ambient : " + result.ambient_count );
		$( "#ph_peak" ).html("Peak : " + result.peak_signal );
		$( "#ph_status" ).html("Status : " + result.range_status );
	})
    .fail(function (xhr, status, errorThrown) {
		console.log(status);
	});	
}

function update_BNO08X() {
	$.ajax({
		url: "http://{{context.robot01_ip}}/BNO08X_Info",
		type: 'GET',
    	dataType: 'json',
    	async: true
	    })	
		.done(function (result) {
			$( "#geoMagRotationVector_real" ).html("GEO Mag. Rot. real : " + result.geoMagRotationVector_real );
			$( "#geoMagRotationVector_i" ).html("GEO Mag. Rot. i : " + result.geoMagRotationVector_i );
			$( "#geoMagRotationVector_j" ).html("GEO Mag. Rot. j : " + result.geoMagRotationVector_j );
			$( "#geoMagRotationVector_k" ).html("GEO Mag. Rot. k : " + result.geoMagRotationVector_k );
			$( "#accelerometer_x" ).html("Accelerometer x : " + result.accelerometer_x );
			$( "#accelerometer_y" ).html("Accelerometer y : " + result.accelerometer_y );
			$( "#accelerometer_z" ).html("Accelerometer z : " + result.accelerometer_z );
			$( "#gyroscope_x" ).html("Gyroscope x : " + result.gyroscope_x );
			$( "#gyroscope_y" ).html("Gyroscope y : " +  result.gyroscope_y );
			$( "#gyroscope_z" ).html("Gyroscope z : " +  result.gyroscope_z );
			$( "#stability" ).html("Stability : " + result.stability );
			$( "#shake" ).html("Shake : " + result.shake );
		})
		.fail(function (xhr, status, errorThrown) {
			console.log(status);
		});	
}

window.onload = function() {
	setInterval("update_VL53L1X()",500);
	setInterval("update_BNO08X()",500);
}

</script>

<body>
<div class="container-fluid">
	<div class="container-fluid" style="position: fixed; background: var(--pico-background-color);">
		<hgroup">
			<br>
			<h1 class="centered" style="color: var(--pico-secondary);">
			Sensors
			<div id="loader" aria-busy="false" style="display:inline-block;margin-left:2em;"></div>
			</h1>
			<a href='index.html'>Back</a>
		</hgroup>
		<hr>
	</div>
	<p style="padding-top: 10em;"></p>

	<div class="container">
		<h2> Distance sensor (VL53L1X)</h2>
		<div class="grid">
			<div id='ph_distance'></div>
		</div>
		<div class="grid">
			<div id='ph_ambient'></div>
		</div>
		<div class="grid">
			<div id='ph_peak'></div>
		</div>
		<div class="grid">
			<div id='ph_status'></div>
		</div>
		<br>
		<hr>
		<h2> Gyro sensor (BNO08X)</h2>
		<div class="grid">
			<div id='shake'></div>
		</div>
		<div class="grid">
			<div id='stability'></div>
		</div>
		<br>
		<div class="grid">
			<div id='geoMagRotationVector_real'></div>
		</div>
		<div class="grid">
			<div id='geoMagRotationVector_i'></div>
		</div>
		<div class="grid">
			<div id='geoMagRotationVector_j'></div>
		</div>
		<div class="grid">
			<div id='geoMagRotationVector_k'></div>
		</div>
		<br>
		<div class="grid">
			<div id='accelerometer_x'></div>
		</div>
		<div class="grid">
			<div id='accelerometer_y'></div>
		</div>
		<div class="grid">
			<div id='accelerometer_z'></div>
		</div>
		<br>
		<div class="grid">
			<div id='gyroscope_x'></div>
		</div>
		<div class="grid">
			<div id='gyroscope_y'></div>
		</div>
		<div class="grid">
			<div id='gyroscope_z'></div>
		</div>
	</div>
</div>
<br>
<br>
</body>
</html>
